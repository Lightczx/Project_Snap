<?xml version="1.0" encoding="utf-8"?>
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Controls="clr-namespace:MahApps.Metro.Controls" xmlns:Converters="clr-namespace:MahApps.Metro.Converters">
  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Shared.xaml" />
  </ResourceDictionary.MergedDictionaries>
  <Converters:ThicknessBindingConverter x:Key="ThicknessBindingConverter" />
  <Style x:Key="{x:Type Controls:NumericUpDown}" TargetType="{x:Type Controls:NumericUpDown}">
    <Setter Property="Control.Background" Value="{DynamicResource ControlBackgroundBrush}" />
    <Setter Property="Control.BorderBrush" Value="{DynamicResource TextBoxBorderBrush}" />
    <Setter Property="Control.BorderThickness" Value="1" />
    <Setter Property="Controls:ControlsHelper.FocusBorderBrush" Value="{DynamicResource TextBoxFocusBorderBrush}" />
    <Setter Property="Controls:ControlsHelper.MouseOverBorderBrush" Value="{DynamicResource TextBoxMouseOverBorderBrush}" />
    <Setter Property="Controls:TextBoxHelper.ButtonFontSize" Value="{DynamicResource ClearTextButtonFontSize}" />
    <Setter Property="Controls:TextBoxHelper.ButtonWidth" Value="22" />
    <Setter Property="Controls:TextBoxHelper.IsMonitoring" Value="True" />
    <Setter Property="FrameworkElement.FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="Control.FontFamily" Value="{DynamicResource ContentFontFamily}" />
    <Setter Property="Control.FontSize" Value="{DynamicResource ContentFontSize}" />
    <Setter Property="Control.Foreground" Value="{DynamicResource TextBrush}" />
    <Setter Property="Control.HorizontalContentAlignment" Value="Right" />
    <Setter Property="FrameworkElement.MinHeight" Value="26" />
    <Setter Property="FrameworkElement.MinWidth" Value="62" />
    <Setter Property="Control.Padding" Value="1" />
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Hidden" />
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Hidden" />
    <Setter Property="UIElement.SnapsToDevicePixels" Value="True" />
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type Controls:NumericUpDown}">
          <Grid SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}">
            <Border Name="Base" Background="{TemplateBinding Control.Background}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="{TemplateBinding Control.BorderThickness}" CornerRadius="{TemplateBinding Controls:ControlsHelper.CornerRadius}" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
            <Grid Margin="{TemplateBinding Control.BorderThickness}">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Name="PART_TextBoxColumn" Width="*" />
                <ColumnDefinition Name="PART_ButtonsColumn" Width="Auto" />
              </Grid.ColumnDefinitions>
              <TextBox Name="PART_TextBox" Grid.Column="0" MinWidth="20" MinHeight="0" Margin="0 0 -2 0" Padding="0" HorizontalAlignment="Stretch" HorizontalContentAlignment="{TemplateBinding Control.HorizontalContentAlignment}" VerticalContentAlignment="{TemplateBinding Control.VerticalContentAlignment}" Controls:ControlsHelper.DisabledVisualElementVisibility="Collapsed" Controls:TextBoxHelper.ButtonContent="{TemplateBinding Controls:TextBoxHelper.ButtonContent}" Controls:TextBoxHelper.ButtonContentTemplate="{TemplateBinding Controls:TextBoxHelper.ButtonContentTemplate}" Controls:TextBoxHelper.ButtonFontFamily="{TemplateBinding Controls:TextBoxHelper.ButtonFontFamily}" Controls:TextBoxHelper.ButtonFontSize="{TemplateBinding Controls:TextBoxHelper.ButtonFontSize}" Controls:TextBoxHelper.ButtonWidth="{TemplateBinding Controls:TextBoxHelper.ButtonWidth}" Controls:TextBoxHelper.ButtonsAlignment="{TemplateBinding Controls:NumericUpDown.ButtonsAlignment}" Controls:TextBoxHelper.ClearTextButton="{TemplateBinding Controls:TextBoxHelper.ClearTextButton}" Controls:TextBoxHelper.HasText="{TemplateBinding Controls:TextBoxHelper.HasText}" Controls:TextBoxHelper.SelectAllOnFocus="{TemplateBinding Controls:TextBoxHelper.SelectAllOnFocus}" Controls:TextBoxHelper.UseFloatingWatermark="{TemplateBinding Controls:TextBoxHelper.UseFloatingWatermark}" Controls:TextBoxHelper.Watermark="{TemplateBinding Controls:TextBoxHelper.Watermark}" Controls:TextBoxHelper.WatermarkAlignment="{TemplateBinding Controls:TextBoxHelper.WatermarkAlignment}" Controls:TextBoxHelper.WatermarkTrimming="{TemplateBinding Controls:TextBoxHelper.WatermarkTrimming}" BorderThickness="0" Focusable="{TemplateBinding UIElement.Focusable}" FontFamily="{TemplateBinding Control.FontFamily}" FontSize="{TemplateBinding Control.FontSize}" Foreground="{TemplateBinding Control.Foreground}" HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}" IsReadOnly="{TemplateBinding Controls:NumericUpDown.IsReadOnly}" IsTabStop="{TemplateBinding Control.IsTabStop}" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" TabIndex="{TemplateBinding Control.TabIndex}" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}" Background="{x:Null}" FocusVisualStyle="{x:Null}" />
              <StackPanel Name="PART_Buttons" Grid.Column="1" Orientation="Horizontal" Margin="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Padding, Converter={StaticResource ThicknessBindingConverter}, ConverterParameter={x:Static Converters:ThicknessSideType.Left}}">
                <RepeatButton Name="PART_NumericUp" Width="{TemplateBinding Controls:NumericUpDown.UpDownButtonsWidth}" Delay="{TemplateBinding Controls:NumericUpDown.Delay}" Foreground="{TemplateBinding Control.Foreground}" IsTabStop="False" Style="{DynamicResource ChromelessButtonStyle}">
                  <Path Name="PolygonUp" Width="14" Height="14" Data="F1M35,19L41,19 41,35 57,35 57,41 41,41 41,57 35,57 35,41 19,41 19,35 35,35 35,19z" Fill="{DynamicResource GrayBrush1}" Stretch="Fill" />
                </RepeatButton>
                <RepeatButton Name="PART_NumericDown" Width="{TemplateBinding Controls:NumericUpDown.UpDownButtonsWidth}" VerticalContentAlignment="Center" Delay="{TemplateBinding Controls:NumericUpDown.Delay}" Foreground="{TemplateBinding Control.Foreground}" IsTabStop="False" Style="{DynamicResource ChromelessButtonStyle}">
                  <Path Name="PolygonDown" Width="14" Height="3" Data="F1M19,38L57,38 57,44 19,44 19,38z" Fill="{DynamicResource GrayBrush1}" Stretch="Fill" />
                </RepeatButton>
              </StackPanel>
            </Grid>
            <Border Name="DisabledVisualElement" Background="{DynamicResource ControlsDisabledBrush}" BorderBrush="{DynamicResource ControlsDisabledBrush}" BorderThickness="{TemplateBinding Control.BorderThickness}" CornerRadius="{TemplateBinding Controls:ControlsHelper.CornerRadius}" IsHitTestVisible="False" Opacity="0" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(Controls:ControlsHelper.DisabledVisualElementVisibility), Mode=OneWay}" />
          </Grid>
          <ControlTemplate.Triggers>
            <Trigger Property="Controls:NumericUpDown.ButtonsAlignment" Value="Left">
              <Setter TargetName="PART_Buttons" Property="Grid.Column" Value="0" />
              <Setter TargetName="PART_Buttons" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Padding, Converter={StaticResource ThicknessBindingConverter}, ConverterParameter={x:Static Converters:ThicknessSideType.Right}}" Property="FrameworkElement.Margin" />
              <Setter TargetName="PART_ButtonsColumn" Property="ColumnDefinition.Width" Value="*" />
              <Setter TargetName="PART_TextBox" Property="Grid.Column" Value="1" />
              <Setter TargetName="PART_TextBox" Property="FrameworkElement.Margin" Value="-2 0 0 0" />
              <Setter TargetName="PART_TextBox" Property="FrameworkElement.Margin" Value="-2 0 0 0" />
              <Setter TargetName="PART_TextBoxColumn" Property="ColumnDefinition.Width" Value="Auto" />
            </Trigger>
            <Trigger Property="UIElement.IsEnabled" Value="False">
              <Setter TargetName="DisabledVisualElement" Property="UIElement.Opacity" Value="0.6" />
            </Trigger>
            <Trigger Property="Controls:NumericUpDown.IsReadOnly" Value="True">
              <Setter Property="Controls:NumericUpDown.InterceptArrowKeys" Value="False" />
              <Setter Property="Controls:NumericUpDown.InterceptManualEnter" Value="False" />
              <Setter Property="Controls:NumericUpDown.InterceptMouseWheel" Value="False" />
              <Setter TargetName="PART_NumericDown" Property="UIElement.IsEnabled" Value="False" />
              <Setter TargetName="PART_NumericUp" Property="UIElement.IsEnabled" Value="False" />
            </Trigger>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="Controls:NumericUpDown.IsReadOnly" Value="False" />
                <Condition Property="Controls:NumericUpDown.InterceptManualEnter" Value="False" />
              </MultiTrigger.Conditions>
              <Setter TargetName="PART_TextBox" Property="TextBoxBase.IsReadOnly" Value="True" />
            </MultiTrigger>
            <Trigger SourceName="PART_NumericUp" Property="UIElement.IsMouseOver" Value="True">
              <Setter TargetName="PART_NumericUp" Value="{DynamicResource GrayBrush8}" Property="Control.Background" />
              <Setter TargetName="PolygonUp" Value="{DynamicResource AccentColorBrush}" Property="Shape.Fill" />
            </Trigger>
            <Trigger SourceName="PART_NumericUp" Property="ButtonBase.IsPressed" Value="True">
              <Setter TargetName="PART_NumericUp" Value="{DynamicResource BlackBrush}" Property="Control.Background" />
              <Setter TargetName="PolygonUp" Value="{DynamicResource WhiteBrush}" Property="Shape.Fill" />
            </Trigger>
            <Trigger SourceName="PART_NumericDown" Property="UIElement.IsMouseOver" Value="True">
              <Setter TargetName="PART_NumericDown" Value="{DynamicResource GrayBrush8}" Property="Control.Background" />
              <Setter TargetName="PolygonDown" Value="{DynamicResource AccentColorBrush}" Property="Shape.Fill" />
            </Trigger>
            <Trigger SourceName="PART_NumericDown" Property="ButtonBase.IsPressed" Value="True">
              <Setter TargetName="PART_NumericDown" Value="{DynamicResource BlackBrush}" Property="Control.Background" />
              <Setter TargetName="PolygonDown" Value="{DynamicResource WhiteBrush}" Property="Shape.Fill" />
            </Trigger>
            <Trigger Property="UIElement.IsMouseOver" Value="True">
              <Setter TargetName="Base" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(Controls:ControlsHelper.MouseOverBorderBrush)}" Property="Border.BorderBrush" />
            </Trigger>
            <Trigger SourceName="PART_TextBox" Property="UIElement.IsFocused" Value="True">
              <Setter TargetName="Base" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(Controls:ControlsHelper.FocusBorderBrush)}" Property="Border.BorderBrush" />
            </Trigger>
            <Trigger Property="Controls:NumericUpDown.HideUpDownButtons" Value="True">
              <Setter TargetName="PART_Buttons" Property="UIElement.Visibility" Value="Collapsed" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
    <Setter Property="Controls:NumericUpDown.UpDownButtonsWidth" Value="22" />
    <Setter Property="Validation.ErrorTemplate" Value="{DynamicResource ValidationErrorTemplate}" />
  </Style>
</ResourceDictionary>