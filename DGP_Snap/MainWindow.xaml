<Window x:Name="WindowLayer"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:DGP_Snap.Views"
        x:Class="DGP_Snap.MainWindow"
        mc:Ignorable="d"
        Title="Snap" Height="768" Width="1024" Loaded="WindowLayer_Loaded" Background="Black" >
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/Animations.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>

    </Window.Resources>
    <Grid>
        <Grid x:Name="WallPaperLayer">
            <Grid.Effect>
                <BlurEffect Radius="0" />
            </Grid.Effect>
            <!--<Image Source="Resources/Assets/6.png" Stretch="UniformToFill"/>-->
            <Image x:Name="WallPaperImage" Stretch="UniformToFill" Source="{Binding CurrentImageSource,IsAsync=True}" HorizontalAlignment="Center" VerticalAlignment="Center" />
            <!--<Image Source="Resources/NoisyTexture.png"></Image>-->
            <Rectangle Fill="#7F000000"/>
            <!--Source="{Binding CurrentImageSource}"-->
        </Grid>

        <Grid x:Name="TextLayer">
            <Grid.RowDefinitions>
                <RowDefinition Height="48"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <StackPanel Grid.Row="1" Orientation="Horizontal">
                <StackPanel Tag="日期时间" Grid.Row="1" Margin="48,0,0,0" >
                    <TextBlock 
                x:Name="TimePresenter" 
                Text="{Binding PresentTimeString}" 
                HorizontalAlignment="Left" 
                VerticalAlignment="Center" 
                FontSize="128" 
                Margin="0" 
                FontFamily="{DynamicResource Light UI Font}" 
                Foreground="{DynamicResource {x:Static SystemColors.ControlLightLightBrushKey}}" />
                    <TextBlock 
                x:Name="DatePresenter"
                Text="{Binding PresentDateString}" 
                Foreground="{DynamicResource {x:Static SystemColors.ControlLightLightBrushKey}}"
                Margin="12,0,12,0" 
                VerticalAlignment="Center" 
                HorizontalAlignment="Left" 
                FontSize="36"
                FontFamily="{DynamicResource Light UI Font}" />
                    <views:WeatherView x:Name="WeatherView"/>
                </StackPanel>
                <Calendar 
                        SelectionMode="None" 
                        Style="{DynamicResource DefaultCalendarStyle}" 
                        CalendarButtonStyle="{DynamicResource DefaultCalendarButtonStyle}" 
                        CalendarItemStyle="{DynamicResource DefaultCalendarItemStyle}" 
                        CalendarDayButtonStyle="{DynamicResource DefaultCalendarDayButtonStyle}" />
            </StackPanel>

            <Grid Grid.Row="2">
                <StackPanel HorizontalAlignment="Left" VerticalAlignment="Top" Margin="48,12,0,0">
                    <!--<TextBlock/>-->


                </StackPanel>
            </Grid>
        </Grid >
        <Grid x:Name="InteractiveLayer">
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="PaneWidth" Width="auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="auto"/>
            </Grid.ColumnDefinitions>

            <Grid x:Name="LeftPane" Width="48" Grid.Column="0" HorizontalAlignment="Left" Opacity="0">
                <Grid.Background>
                    <SolidColorBrush Color="#99000000" Opacity="0"/>
                </Grid.Background>
                <Grid.Triggers>
                    <EventTrigger RoutedEvent="MouseEnter">
                        <BeginStoryboard Storyboard="{DynamicResource PaneOpenColorAnimation}"/>
                        <BeginStoryboard Storyboard="{DynamicResource PaneOpenAnimation}"/>
                        <BeginStoryboard Storyboard="{DynamicResource PaneOpenVisbilityAnimation}"/>
                        <BeginStoryboard Storyboard="{DynamicResource BackgroundBlurEffectInAnimation}"/>
                        <BeginStoryboard Storyboard="{DynamicResource BackgroundMarginInAnimation}"/>
                    </EventTrigger>
                    <EventTrigger RoutedEvent="MouseLeave">
                        <BeginStoryboard Storyboard="{DynamicResource PaneCloseColorAnimation}"/>
                        <BeginStoryboard Storyboard="{DynamicResource PaneCloseAnimation}"/>
                        <BeginStoryboard Storyboard="{DynamicResource PaneCloseVisbilityAnimation}"/>
                        <BeginStoryboard Storyboard="{DynamicResource BackgroundBlurEffectOutAnimation}"/>
                        <BeginStoryboard Storyboard="{DynamicResource BackgroundMarginOutAnimation}"/>
                    </EventTrigger>
                </Grid.Triggers>
                <StackPanel Tag="左侧上按钮" Margin="0" VerticalAlignment="Top" HorizontalAlignment="Left" >
                    <Button 
                        x:Name="MenuButton" 
                        Content="&#xE700;"  
                        HorizontalAlignment="Right" 
                        VerticalAlignment="Top" 
                        Width="48" 
                        Height="48" 
                        Grid.Column="1" 
                        Style="{DynamicResource DefaultButtonStyle}" 
                        FontFamily="{DynamicResource Icon_Font}"  
                        FontSize="16" 
                        Foreground="White"
                        />
                    <StackPanel x:Name="FunctionButtonPanel" Visibility="Collapsed">
                        <Button 
                            x:Name="CloseButton" 
                            Foreground="Red"
                            Content="&#xE106;"  
                            HorizontalAlignment="Right" 
                            VerticalAlignment="Top" 
                            Width="48" 
                            Height="48" 
                            Click="CloseButton_Click" 
                            Grid.Column="1" 
                            Style="{DynamicResource DefaultButtonStyle}" 
                            FontFamily="{DynamicResource Icon_Font}"  
                            FontSize="16" />
                        
                    </StackPanel>

                </StackPanel>
                <StackPanel Tag="左侧下按钮" VerticalAlignment="Bottom" Visibility="{Binding ElementName=FunctionButtonPanel,Path=Visibility}" HorizontalAlignment="Left">
                    <Button 
                            x:Name="SwitchWallPaperButton" 
                            Content="&#xE72C;"  
                            HorizontalAlignment="Right" 
                            VerticalAlignment="Top" 
                            Width="48" 
                            Height="48" 
                            Click="SwitchWallPaperButton_Click"
                            Grid.Column="1" 
                            Style="{DynamicResource DefaultButtonStyle}" 
                            FontFamily="{DynamicResource Icon_Font}"  
                            FontSize="16" 
                            Foreground="White"/>
                    <Button 
                            x:Name="DownloadWallPaperButton" 
                            Content="&#xE896;"  
                            HorizontalAlignment="Right" 
                            VerticalAlignment="Top" 
                            Width="48" 
                            Height="48" 
                            
                            Grid.Column="1" 
                            Style="{DynamicResource DefaultButtonStyle}" 
                            FontFamily="{DynamicResource Icon_Font}"  
                            FontSize="16" 
                            Foreground="White" Click="DownloadWallPaperButton_Click"/>
                    <Button 
                            x:Name="LockButton" 
                            Content="&#xE785;"  
                            HorizontalAlignment="Right" 
                            VerticalAlignment="Top" 
                            Width="48" 
                            Height="48" 
                            Click="LockButton_Click"
                            Grid.Column="1" 
                            Style="{DynamicResource DefaultButtonStyle}" 
                            FontFamily="{DynamicResource Icon_Font}"  
                            FontSize="16" 
                            Foreground="White">

                    </Button>
                    <Button 
                            x:Name="SettingsButton" 
                            Content="&#xE713;"  
                            HorizontalAlignment="Right" 
                            VerticalAlignment="Top" 
                            Width="48" 
                            Height="48" 
                            
                            Grid.Column="1" 
                            Style="{DynamicResource DefaultButtonStyle}" 
                            FontFamily="{DynamicResource Icon_Font}"  
                            FontSize="16" 
                            Foreground="White"/>
                </StackPanel>
                <!--<views:SettingView Margin="48,0,48,0"></views:SettingView>-->
            </Grid>
        </Grid>
    </Grid>
</Window>
